-- phpMyAdmin SQL Dump
-- version 4.1.14
-- http://www.phpmyadmin.net
--
-- Client :  127.0.0.1
-- Généré le :  Lun 03 Avril 2017 à 17:04
-- Version du serveur :  5.6.17
-- Version de PHP :  5.5.12

SET SQL_MODE = "NO_AUTO_VALUE_ON_ZERO";
SET time_zone = "+00:00";


/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;

--
-- Base de données :  `gestion_incident`
--

-- --------------------------------------------------------

--
-- Structure de la table `gi_category`
--

CREATE TABLE IF NOT EXISTS `gi_category` (
  `id_category` int(5) NOT NULL AUTO_INCREMENT,
  `id_resolver` int(5) NOT NULL,
  `name` varchar(50) NOT NULL,
  `description` varchar(255) NOT NULL,
  PRIMARY KEY (`id_category`),
  KEY `id_category` (`id_category`),
  KEY `id_resolver` (`id_resolver`),
  KEY `id_category_2` (`id_category`),
  KEY `id_resolver_2` (`id_resolver`),
  KEY `id_category_3` (`id_category`),
  KEY `id_category_4` (`id_category`),
  KEY `id_resolver_3` (`id_resolver`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ;

-- --------------------------------------------------------

--
-- Structure de la table `gi_db_right`
--

CREATE TABLE IF NOT EXISTS `gi_db_right` (
  `id_right` varchar(1) NOT NULL,
  `name` varchar(50) NOT NULL,
  PRIMARY KEY (`id_right`),
  KEY `id_right` (`id_right`),
  KEY `id_right_2` (`id_right`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

-- --------------------------------------------------------

--
-- Structure de la table `gi_device`
--

CREATE TABLE IF NOT EXISTS `gi_device` (
  `id_device` int(5) NOT NULL AUTO_INCREMENT,
  `category` varchar(50) NOT NULL,
  `description` varchar(255) NOT NULL,
  PRIMARY KEY (`id_device`),
  KEY `id_device` (`id_device`),
  KEY `id_device_2` (`id_device`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ;

-- --------------------------------------------------------

--
-- Structure de la table `gi_ticket`
--

CREATE TABLE IF NOT EXISTS `gi_ticket` (
  `id_ticket` int(5) NOT NULL AUTO_INCREMENT,
  `id_spotter` int(5) NOT NULL,
  `id_category` int(5) NOT NULL,
  `id_device` int(5) NOT NULL,
  `statement` varchar(50) NOT NULL,
  `description` varchar(500) NOT NULL,
  `priority` varchar(50) NOT NULL,
  `date_creation` date NOT NULL,
  `date_resolution` date NOT NULL,
  `note` varchar(500) NOT NULL,
  PRIMARY KEY (`id_ticket`),
  KEY `id_ticket` (`id_ticket`,`id_spotter`,`id_category`,`id_device`),
  KEY `id_spotter` (`id_spotter`),
  KEY `id_category` (`id_category`),
  KEY `id_device` (`id_device`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ;

-- --------------------------------------------------------

--
-- Structure de la table `gi_user`
--

CREATE TABLE IF NOT EXISTS `gi_user` (
  `id_user` int(5) NOT NULL AUTO_INCREMENT,
  `name` varchar(50) NOT NULL,
  `firstname` varchar(50) NOT NULL,
  `postal_code` varchar(5) NOT NULL,
  `email` varchar(50) NOT NULL,
  `password` varchar(50) NOT NULL,
  `id_right` varchar(1) NOT NULL,
  PRIMARY KEY (`id_user`),
  KEY `id_user` (`id_user`),
  KEY `id_right` (`id_right`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ;

--
-- Contraintes pour les tables exportées
--

--
-- Contraintes pour la table `gi_ticket`
--
ALTER TABLE `gi_ticket`
  ADD CONSTRAINT `id_category` FOREIGN KEY (`id_category`) REFERENCES `gi_category` (`id_category`),
  ADD CONSTRAINT `id_device` FOREIGN KEY (`id_device`) REFERENCES `gi_device` (`id_device`),
  ADD CONSTRAINT `id_spotter` FOREIGN KEY (`id_spotter`) REFERENCES `gi_user` (`id_user`);

--
-- Contraintes pour la table `gi_user`
--
ALTER TABLE `gi_user`
  ADD CONSTRAINT `id_right_user` FOREIGN KEY (`id_right`) REFERENCES `gi_db_right` (`id_right`);

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
